# Xamarin.iOS
# Build a Xamarin.iOS project.
# Add steps that install certificates, test, sign, and distribute an app, save build artifacts, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/xamarin

trigger:
- master

pool:
  vmImage: 'macos-latest'

jobs:
- job: A
  steps:

  - task: InstallAppleProvisioningProfile@1
    inputs:
      provisioningProfileLocation: 'secureFiles'
      provProfileSecureFile: 'test.mobileprovision'

  - task: Bash@3
    inputs:
      targetType: 'inline'
      script: |
        use=$(id -un)
        cd "/Users/$usrdir/Library/MobileDevice/Provisioning Profiles"
        pwd
        ls
        security cms -D -i B5C2906D-D6EE-476E-AF17-D99AE14644AB.mobileprovision
      failOnStderr: true
- job: B
  steps:
  - task: Bash@3
    inputs:
      targetType: 'inline'
      script: |
        use=$(id -un)
        cd "/Users/$usrdir/Library/MobileDevice/Provisioning Profiles"
        pwd
        ls
        security cms -D -i B5C2906D-D6EE-476E-AF17-D99AE14644AB.mobileprovision
      failOnStderr: true